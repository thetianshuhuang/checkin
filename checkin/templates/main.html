{% extends "base.html" %}

{% block content %}

<script>

function loadProgram(id, token) {
	fetch("http://localhost:8000/api/records/get/" + id + "?token=" + token)
	.then(res => res.json())
	.then(out => { tmp(out); })
	.catch(err => { throw err; });
}

function tmp(data) {
    var program = new Program("root");
    console.log(data)
    program.updateRecords(data['records']);
}

</script>

<div class="content-intro"><div><div>

	<h2>{{user}} | programs</h2>

	<table>
	{% for token in tokens %}
		<tr>
			<td>{{token.desc}}</td>
			<td>{{token.api_token}}</td>
		</tr>
	{% endfor %}
	</table>

	<div>
	{% for program in programs %}
		<div id="program-entry-{{program.id}}">
			<button class="button-square" onclick="">
				<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
			</button>
			<button class="button-square"
					onclick="loadProgram('{{program.id}}', '{{program.access_token}}');">
				<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
			</button>
			<button class="button-square">
				<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/></svg>
			</button>
			<span style="padding: 0px 8px">{{program.name}}</span>
		</div>
	{% endfor %}
	</div>

	<table>
	{% for program in programs %}
		<tr>
			<td>Write: {{program.api_token}}</td>
			<td>Read: {{program.access_token}}</td>
		</tr>
	{% endfor %}
	</table>

	<div id="token-field"></div>

</div></div></div>


<div class="content">

<script src="/static/util.js"></script>
<script src="/static/icons.js"></script>
<script src="/static/program.js"></script>

<div style="height: 20px"></div>
<div id="12345678-1234-1234-children" class="project">
</div>


{% endblock %}
